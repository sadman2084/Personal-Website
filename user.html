<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sadman — Portfolio</title>
    <meta name="description" content="Portfolio of Sadman — Web Developer, Designer, and Problem Solver." />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <a class="logo" href="#">Sadman</a>
        <nav class="nav">
          <a href="user.html#about">About</a>
          <a href="user.html#projects">Projects</a>
          <a href="user.html#analytics">Analytics</a>
          <a href="user.html#skills">Skills</a>
          <a href="user.html#contact">Contact</a>
          <a href="inventory.html">Inventory</a>
          <a href="study.html">Study</a>
          <a href="blogs.html">Blogs</a>
        </nav>
        <a class="btn-outline" href="index.html#contact">Hire Me</a>
      </div>
    </header>

    <main>
      <section class="hero">
        <div class="container hero-grid">
          <div class="hero-text">
            <h1>Hi, I'm <span class="accent">Sadman</span></h1>
            <p class="lead">A front-end developer who builds accessible, performant web experiences. I design UI and implement responsive, maintainable code.</p>
            <div class="hero-cta">
              <a class="btn" href="#projects">See Projects</a>
              <a class="btn-light" href="resume.pdf" download>Download Resume</a>
            </div>
            <ul class="social-inline">
              <li><a href="https://github.com/sadman2084" aria-label="GitHub">GitHub</a></li>
              <li><a href="https://www.linkedin.com/in/md-sadman-kabir-414b4b270/" aria-label="LinkedIn">LinkedIn</a></li>
              <!-- <li><a href="#" aria-label="Twitter">Twitter</a></li> -->
            </ul>
          </div>
          <div class="hero-photo">
            <img src="https://via.placeholder.com/320x320.png?text=Your+Photo" alt="Your portrait" />
          </div>
        </div>
      </section>

      <section id="about" class="section container">
        <h2>About Me</h2>
        <p>I build web applications and user interfaces with attention to accessibility, performance and delightful UX. I enjoy turning design into code and solving product problems.</p>
        <div class="about-grid">
          <div>
            <h3>Experience</h3>
            <p>3+ years building web apps using HTML, CSS, JavaScript, and modern frameworks.</p>
          </div>
          <div>
            <h3>Education</h3>
            <p>Degree or relevant coursework — University or Bootcamp.</p>
          </div>
        </div>
      </section>

      <section id="skills" class="section container">
        <h2>Skills</h2>
        <div class="skills-grid">
          <div class="skill">
            <h4>HTML & CSS</h4>
            <div class="progress"><div style="width:50%"></div></div>
          </div>
          <div class="skill">
            <h4>Python</h4>
            <div class="progress"><div style="width:30%"></div></div>
          </div>
          <div class="skill">
            <h4>Arduino</h4>
            <div class="progress"><div style="width:80%"></div></div>
          </div>
          <div class="skill">
            <h4>Machine Learning</h4>
            <div class="progress"><div style="width:30%"></div></div>
          </div>
        </div>
      </section>

      <section id="projects" class="section container">
        <h2>Projects</h2>
        <p>Selected work — click to view live demos or code.</p>
        <div class="projects-grid" id="projects-container">
          <p style="text-align: center; color: #999;">Loading projects...</p>
        </div>
      </section>

      <!-- Analytics page header (from analytics.html) -->
      <section class="section container">
        <p class="eyebrow">Analytics</p>
        <h1>Site Insights</h1>
        <p class="muted-text">Demo analytics snapshot. Replace with your backend feed when ready.</p>
        <div class="hero-cta" style="margin-top:1.25rem;">
          <a class="btn" href="#projects">Back to portfolio</a>
          <a class="btn-light" href="#contact">Contact</a>
        </div>
      </section>

      <section id="analytics" class="section container analytics-section">
        <div class="section-heading">
          <div>
            <p class="eyebrow">Portfolio Stats</p>
            <h2>Quick Overview</h2>
            <p class="muted-text">Experience, skills, and project highlights at a glance.</p>
          </div>
          <div style="display:flex;align-items:center;gap:.5rem;flex-wrap:wrap">
            <span class="pill subtle">Skills & experience</span>
          </div>
        </div>

        <div class="analytics-grid" aria-live="polite">
          <article class="metric-card">
            <p class="metric-label">Total projects</p>
            <p class="metric-value" id="metric-projects">--</p>
            <p class="metric-trend" id="trend-projects">Completed</p>
          </article>

          <article class="metric-card">
            <p class="metric-label">Years experience</p>
            <p class="metric-value" id="metric-experience">3+</p>
            <p class="metric-trend" id="trend-experience">Web dev</p>
          </article>

          <article class="metric-card">
            <p class="metric-label">Technologies</p>
            <p class="metric-value" id="metric-tech">12+</p>
            <p class="metric-trend" id="trend-tech">Frontend & Backend</p>
          </article>

          <article class="metric-card">
            <p class="metric-label">Certifications</p>
            <p class="metric-value" id="metric-certs">--</p>
            <p class="metric-trend" id="trend-certs">Skills verified</p>
          </article>

          <article class="metric-card">
            <p class="metric-label">GitHub repos</p>
            <p class="metric-value" id="metric-repos">--</p>
            <p class="metric-trend" id="trend-repos">Open source</p>
          </article>
        </div>

        <div class="panel-grid">
          <article class="panel">
            <div class="panel-header">
              <div>
                <p class="eyebrow">Content</p>
                <h3>Top pages</h3>
              </div>
              <span class="pill">Views</span>
            </div>
            <ul class="list" id="top-pages-list">
              <li class="list-row">Loading...</li>
            </ul>
          </article>

          <article class="panel">
            <div class="panel-header">
              <div>
                <p class="eyebrow">Engagement</p>
                <h3>Events & health</h3>
              </div>
              <span class="pill">Live</span>
            </div>
            <div class="stat-grid">
              <div class="stat">
                <p class="stat-label">Project clicks</p>
                <p class="stat-value" id="stat-project-clicks">--</p>
              </div>
              <div class="stat">
                <p class="stat-label">Contact submits</p>
                <p class="stat-value" id="stat-contact-submits">--</p>
              </div>
              <div class="stat">
                <p class="stat-label">Resume downloads</p>
                <p class="stat-value" id="stat-resume-downloads">--</p>
              </div>
              <div class="stat">
                <p class="stat-label">404s (24h)</p>
                <p class="stat-value" id="stat-404s">--</p>
              </div>
              <div class="stat">
                <p class="stat-label">JS error rate</p>
                <p class="stat-value" id="stat-js-errors">--</p>
              </div>
              <div class="stat">
                <p class="stat-label">Avg. load</p>
                <p class="stat-value" id="stat-load">--</p>
              </div>
              <div class="stat">
                <p class="stat-label">LCP</p>
                <p class="stat-value" id="stat-lcp">--</p>
              </div>
              <div class="stat">
                <p class="stat-label">CLS</p>
                <p class="stat-value" id="stat-cls">--</p>
              </div>
            </div>
          </article>
        </div>

        <article class="panel sources-panel">
          <div class="panel-header">
            <div>
              <p class="eyebrow">Acquisition</p>
              <h3>Traffic sources</h3>
            </div>
            <span class="pill">Share</span>
          </div>
          <div id="sources-list" class="sources-list">
            <p class="muted-text">Loading...</p>
          </div>
        </article>
      </section>

      <section id="contact" class="section container contact-section">
        <h2>Contact</h2>
        <p>I'm available for freelance or full-time work. Reach out and let's talk.</p>
        <div class="contact-grid">
          <form class="contact-form" id="contact-form" onsubmit="handleContactForm(event)">
            <div id="contact-message" style="display: none; padding: 12px; border-radius: 6px; margin-bottom: 15px; font-weight: 500;"></div>
            
            <label for="name">Name</label>
            <input id="name" name="name" type="text" required />

            <label for="email">Email</label>
            <input id="email" name="email" type="email" required />

            <label for="message">Message</label>
            <textarea id="message" name="message" rows="6" required></textarea>

            <div class="form-actions">
              <button class="btn" type="submit" id="submit-btn">Send Message</button>
              <button class="btn-outline" type="reset">Reset</button>
            </div>
          </form>

          <aside class="contact-info">
            <h3>Other ways to reach me</h3>
            <p id="contact-email"><strong>Email:</strong> <a href="mailto:sadmankabir897@gmail.com">sadmankabir897@gmail.com</a></p>
            <p id="contact-phone" style="display:none;"><strong>Phone:</strong> <span></span></p>
            <p id="contact-location" style="display:none;"><strong>Location:</strong> <span></span></p>
            <p id="contact-social">Or find me on: <a href="https://github.com/sadman2084" id="github-link" target="_blank">GitHub</a>, <a href="https://www.linkedin.com/in/md-sadman-kabir-414b4b270/" id="linkedin-link" target="_blank">LinkedIn</a></p>
          </aside>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <p>© <span id="year"></span> Your Name. Built with care.</p>
        <nav class="footer-nav">
          <a href="#">Privacy</a>
          <a href="#">Terms</a>
        </nav>
      </div>
    </footer>

    <script>
      // Set current year
      document.getElementById('year').textContent = new Date().getFullYear();

      // Load projects and profile on page load
      window.addEventListener('DOMContentLoaded', () => {
        loadProjects();
        loadProfile();
        loadAnalytics();
      });

      // Handle contact form submission
      async function handleContactForm(e) {
        e.preventDefault();

        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        const message = document.getElementById('message').value;

        const submitBtn = document.getElementById('submit-btn');
        const messageDiv = document.getElementById('contact-message');

        submitBtn.disabled = true;
        submitBtn.textContent = 'Sending...';

        try {
          const response = await fetch('save_message.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name, email, message })
          });

          const data = await response.json();

          if (data.success) {
            messageDiv.textContent = data.message;
            messageDiv.style.background = '#d4edda';
            messageDiv.style.color = '#155724';
            messageDiv.style.border = '1px solid #c3e6cb';
            messageDiv.style.display = 'block';
            document.getElementById('contact-form').reset();
            setTimeout(() => {
              messageDiv.style.display = 'none';
            }, 5000);
          } else {
            messageDiv.textContent = data.message;
            messageDiv.style.background = '#f8d7da';
            messageDiv.style.color = '#721c24';
            messageDiv.style.border = '1px solid #f5c6cb';
            messageDiv.style.display = 'block';
          }
        } catch (error) {
          messageDiv.textContent = 'Error sending message. Please try again.';
          messageDiv.style.background = '#f8d7da';
          messageDiv.style.color = '#721c24';
          messageDiv.style.border = '1px solid #f5c6cb';
          messageDiv.style.display = 'block';
          console.error('Error:', error);
        } finally {
          submitBtn.disabled = false;
          submitBtn.textContent = 'Send Message';
        }
      }

      // Load profile information
      async function loadProfile() {
        try {
          const response = await fetch('get_public_profile.php');
          const data = await response.json();

          if (data.success) {
            const profile = data.profile;

            // Update contact email
            const emailLink = `mailto:${profile.email}`;
            document.getElementById('contact-email').innerHTML = `<strong>Email:</strong> <a href="${emailLink}">${profile.email}</a>`;
            document.getElementById('contact-form').action = emailLink;

            // Update phone if available
            if (profile.phone) {
              document.getElementById('contact-phone').style.display = 'block';
              document.getElementById('contact-phone').querySelector('span').textContent = profile.phone;
            }

            // Update location if available
            if (profile.location) {
              document.getElementById('contact-location').style.display = 'block';
              document.getElementById('contact-location').querySelector('span').textContent = profile.location;
            }

            // Update social media links
            if (profile.github_url) {
              document.getElementById('github-link').href = profile.github_url;
            }
            if (profile.linkedin_url) {
              document.getElementById('linkedin-link').href = profile.linkedin_url;
            }
          }
        } catch (error) {
          console.error('Error loading profile:', error);
        }
      }

      // Load projects from database
      async function loadProjects() {
        try {
          const response = await fetch('get_all_projects.php');
          const data = await response.json();

          const container = document.getElementById('projects-container');

          if (data.success && data.projects.length > 0) {
            container.innerHTML = data.projects.map(project => `
              <article class="project">
                ${project.image_url ? `<img src="${project.image_url}" alt="${project.title} screenshot" />` : ''}
                <div class="project-body">
                  <h3>${project.title}</h3>
                  <p>${project.description}</p>
                  <p class="project-links">
                    ${project.github_link ? `<a href="${project.github_link}" target="_blank">Code</a>` : ''}
                    ${project.live_link ? `${project.github_link ? ' · ' : ''}<a href="${project.live_link}" target="_blank">Live</a>` : ''}
                  </p>
                </div>
              </article>
            `).join('');
          } else {
            container.innerHTML = '<p style="text-align: center; color: #999;">No projects found.</p>';
          }
        } catch (error) {
          console.error('Error loading projects:', error);
          document.getElementById('projects-container').innerHTML = '<p style="text-align: center; color: #999;">Error loading projects.</p>';
        }
      }

      // Demo analytics until a backend endpoint is wired up
      function loadAnalytics() {
        const analyticsData = {
          totals: {
            visits: 12400,
            unique: 8300,
            avgDurationMinutes: 3.8,
            conversionRate: 4.7,
            bounceRate: 38
          },
          trends: {
            visits: 12,
            unique: 7,
            duration: 6,
            conversion: 1.4,
            bounce: -3
          },
          events: {
            projectClicks: 142,
            contactSubmits: 32,
            resumeDownloads: 18
          },
          performance: {
            load: '1.1s',
            lcp: '2.3s',
            cls: '0.08'
          },
          errors: {
            notFound: 4,
            jsErrorRate: 0.3
          },
          sources: [
            { label: 'Organic search', percent: 48 },
            { label: 'Direct', percent: 22 },
            { label: 'Social', percent: 16 },
            { label: 'Referral', percent: 9 },
            { label: 'Email', percent: 5 }
          ],
          topPages: [
            { title: 'Home', views: 5400, avgTime: '2m 10s', exitRate: '22%' },
            { title: 'Projects', views: 3800, avgTime: '2m 45s', exitRate: '18%' },
            { title: 'Inventory', views: 1400, avgTime: '1m 20s', exitRate: '29%' },
            { title: 'Contact', views: 960, avgTime: '1m 05s', exitRate: '9%' }
          ]
        };

        const formatNumber = value => value.toLocaleString();

        const setMetric = (id, value) => {
          const el = document.getElementById(id);
          if (el) el.textContent = value;
        };

        const setTrend = (id, delta) => {
          const el = document.getElementById(id);
          if (!el) return;

          const direction = delta >= 0 ? 'up' : 'down';
          el.className = `metric-trend ${direction}`;
          el.textContent = `${delta >= 0 ? '+' : ''}${delta}% vs last week`;
        };

        setMetric('metric-visits', formatNumber(analyticsData.totals.visits));
        setMetric('metric-unique', formatNumber(analyticsData.totals.unique));
        setMetric('metric-duration', `${analyticsData.totals.avgDurationMinutes} min`);
        setMetric('metric-conversion', `${analyticsData.totals.conversionRate}%`);
        setMetric('metric-bounce', `${analyticsData.totals.bounceRate}%`);

        setTrend('trend-visits', analyticsData.trends.visits);
        setTrend('trend-unique', analyticsData.trends.unique);
        setTrend('trend-duration', analyticsData.trends.duration);
        setTrend('trend-conversion', analyticsData.trends.conversion);
        setTrend('trend-bounce', analyticsData.trends.bounce);

        setMetric('stat-project-clicks', formatNumber(analyticsData.events.projectClicks));
        setMetric('stat-contact-submits', formatNumber(analyticsData.events.contactSubmits));
        setMetric('stat-resume-downloads', formatNumber(analyticsData.events.resumeDownloads));
        setMetric('stat-404s', formatNumber(analyticsData.errors.notFound));
        setMetric('stat-js-errors', `${analyticsData.errors.jsErrorRate}%`);
        setMetric('stat-load', analyticsData.performance.load);
        setMetric('stat-lcp', analyticsData.performance.lcp);
        setMetric('stat-cls', analyticsData.performance.cls);

        const pagesList = document.getElementById('top-pages-list');
        if (pagesList) {
          pagesList.innerHTML = analyticsData.topPages.map(page => `
            <li class="list-row">
              <div>
                <strong>${page.title}</strong>
                <p class="muted-text">${formatNumber(page.views)} views · ${page.avgTime}</p>
              </div>
              <span class="pill subtle">${page.exitRate} exits</span>
            </li>
          `).join('');
        }

        const sourcesList = document.getElementById('sources-list');
        if (sourcesList) {
          sourcesList.innerHTML = analyticsData.sources.map(source => `
            <div class="source-row">
              <span>${source.label}</span>
              <div class="source-bar" aria-hidden="true"><span style="width:${source.percent}%"></span></div>
              <span class="source-value">${source.percent}%</span>
            </div>
          `).join('');
        }
      }
    </script>
  </body>
</html>
